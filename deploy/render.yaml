services:
  - name: music-mix-api
    type: web
    region: oregon
    rootDir: .
    buildCommand: pip install -r deploy/requirements.txt && pip install -e .
    startCommand: gunicorn "deploy.app_final:app" --workers 1 --timeout 180 --bind "0.0.0.0:5000"
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.6
      - key: MAX_CONTENT_LENGTH
        value: 52428800
      - key: UPLOAD_FOLDER
        value: /tmp/music-mix-uploads
      - key: OUTPUT_FOLDER
        value: /tmp/music-mix-outputs
    disk:
      name: music-mix-storage
      mountPath: /tmp
      sizeGB: 1
